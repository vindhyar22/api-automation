package tests;
import org.testng.Assert;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Test;

import com.aventstack.extentreports.ExtentReports;

import io.restassured.http.ContentType;
import io.restassured.response.Response;
import report.ExtentTestNGListener;

import static io.restassured.RestAssured.*;

public class APIsample {
	
	
	@Test
    public void testLoginAPI() {
        String requestBody = "{ \"username\": \"vindhyar@byteridge.com\", \"password\": \"Pass@12345\" }";

        Response response =
            given()
                .contentType(ContentType.JSON)
                .body(requestBody)
            .when()
                .post("https://api-qa.dthreaddev.com/api/sessions/auth")
            .then()
                .statusCode(200) // Validate the status code is 200 (OK)
                //.body("status", equalTo("success"))
                //.body("message", equalTo("Login successful"))
                //.body("session_id", not(emptyOrNullString())) // Validate the session_id is not empty
                .extract().response();

        // Extract session ID and message from the response
        String dtauthloginkey = response.jsonPath().getString("session_id");
        String dtauthloginkey2  = response.jsonPath().getString("message");

        // Print the extracted session ID and message
        System.out.println("dtauthloginkey " + dtauthloginkey);
        System.out.println("dtauthloginkey2: " + dtauthloginkey2);

        // You can also use these extracted values for subsequent requests or any other purposes in your test.
    }
}
