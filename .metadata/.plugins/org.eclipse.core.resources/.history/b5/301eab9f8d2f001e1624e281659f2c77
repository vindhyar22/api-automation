package tests;
import org.testng.Assert;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Test;

import com.aventstack.extentreports.ExtentReports;

import io.restassured.http.ContentType;
import io.restassured.response.Response;
import report.ExtentTestNGListener;

import static io.restassured.RestAssured.*;

public class APIsample {
	
	
	@Test
    public void testAuth() {
        String requestBody = "{ \"username\": \"vindhyar@byteridge.com\", \"password\": \"Pass@12345\" }";

        Response response =
            given()
                .contentType(ContentType.JSON)
                .body(requestBody)
            .when()
                .post("https://api-qa.dthreaddev.com/api/sessions/auth")
            .then()
                .statusCode(200) // Validate the status code is 200 (OK)
                .body("data.userData.id", not(emptyOrNullString())) // Validate the id is not empty
                .body("data.userData.organizationId", not(emptyOrNullString())) // Validate the organizationId is not empty
                .extract().response();
        
        String dtauthloginkey = response.jsonPath().getString("data.userData.id");
        String dtauthloginkey2 = response.jsonPath().getString("data.userData.organizationId");

        // Print the extracted id and organizationId
        System.out.println("dtauthloginkey: " + dtauthloginkey);
        System.out.println("dtauthloginkey2: " + dtauthloginkey2);

    }
}
